<!-- ==================== NAVBAR =================== -->
<section ng-include="'../partials/navbar.html'"></section>

<!-- ==================== TICKER =================== -->
<section ng-include="'../partials/ticker.html'"></section>

<!-- ==================== MAIN SECTION ============= -->
<section class="dashboard">
  <h1>WELCOME, {{currentUser.name}}</h1>

  <div class="card-container">
    <!-- =================== PORTFOLIO ================= -->
    <div class="column">
      <div class="card user-portfolio">
        <h3>YOUR PORTFOLIO</h3>
        <div class="row">
          <div class="stats">
            <h4>CURRENT $</h4>
            <p>
              {{currentUser.money | currency}}
            </p>
          </div>
          <div class="stats">
            <h4>GAINED $</h4>
            <p>
              $100.00
            </p>
          </div>
        </div>
        <div class="row">
          <div class="stats">
            <h4>CURRENT STOCKS</h4>
            <p>
              20
            </p>
          </div>
          <div class="stats">
            <h4>WATCHED STOCKS</h4>
            <p>
              14
            </p>
          </div>
        </div>
        <div class="row">
          <div class="btn">
            edit account
          </div>
          <div class="btn">
            delete account
          </div>
        </div>
      </div>

      <!-- =================== STOCKS =================== -->
      <div class="card user-stocks">
        <h3>YOUR STOCKS</h3>
        <div class="row">
          <div class="btn">
            bought
          </div>
          <div class="btn">
            watched
          </div>
        </div>
        <div class="stock-container">
          <table>
            <thead>
              <tr>
                <th>Stock</th>
                <th>Qty</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody ng-repeat="stock in myStocks" ng-if='stock.watched == false'>
              <strong ng-click="vm.modalToggle();">
              <tr>

                <td>{{stock.symbol}} </td>
                <td>{{stock.qty}} </td>
                <td>{{stock.price}} </td>


              </tr>
              </strong>

            </tbody>

          </table>

          <!-- <div ng-repeat="stock in myStocks">
            <div class="stock"><strong ng-click="vm.modalToggle();">
              {{stock.symbol}}    {{stock.price | currency }}</strong>
            </div>
          </div> -->

        </div>
      </div>
    </div>
    <!-- ================= CHART MODAL ================ -->
    <div class="card chart">
      <h3>THE STOCKS</h3>
      <div class="input-container">
        <form ng-submit="vm.searchStock()">
          <input type="text" ng-model="vm.stocksearch.stock" placeholder="SEARCH FOR A STOCK..." required/>
          <input type="submit" value="SEARCH" />
        </form>
      </div>
      <div class="search-stock-container">
        <!--  should display an error if there is no record found -->
        <div ng-hide="!error_msg">
          <strong>{{error_msg}}</strong>
        </div>
        <div class="search-stock-info" ng-hide="!stockSearchResult">
          <h3>{{stockSearchResult.name}} ({{stockSearchResult.symbol}})</h3>
          <table>
            <tr>
              <td><strong>Current Ask:</strong></td>
              <td class="stock-stat">{{stockSearchResult.ask}}</td>
            </tr>
            <tr>
              <td><strong>Current Bid:</strong></td>
              <td class="stock-stat">{{stockSearchResult.bid}}</td>
            </tr>
            <tr>
              <td><strong>Last Trade Price:</strong></td>
              <td class="stock-stat">{{stockSearchResult.last_trade_price_only}}
              </td>
            </tr>
            <tr>
              <td><strong>Day Range:</strong></td>
              <td class="stock-stat">{{stockSearchResult.days_range}}</td>
            </tr>
            <tr>
              <td><strong>Average Daily Volume:</strong></td>
              <td class="stock-stat">{{stockSearchResult.average_daily_volume}}</td>
            </tr>
            <tr>
              <td><strong>Year High:</strong></td>
              <td class="stock-stat">{{stockSearchResult.year_high}}</td>
            </tr>
            <tr>
              <td><strong>Year Low</strong></td>
              <td class="stock-stat">{{stockSearchResult.year_low}}</td>
            </tr>
          </table>
          <div class="stock-btn" ng-click="vm.buyShareToggle();">
            BUY SHARES
          </div>
          <form class="buy-shares" ng-if="vm.buyingShares">
            <input type="text" placeholder="AMOUNT OF SHARES..." />
            <input type="submit" />
          </form>
          <div class="stock-btn">
            WATCH STOCK
          </div>
        </div>
      </div>
    </div>

  </div>
  <!-- ================= STOCK MODAL ================ -->
  <div ng-if="vm.modalActive" class="modal">
    <div class="box">
      <div class="close" ng-click="vm.modalToggle();">
        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
      </div>
    </div>
  </div>
</section>
